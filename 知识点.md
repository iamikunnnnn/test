# 1 数据库基本概念
## 1.1 什么是数据库？
数据库是有组织可共享的，持久存储和管理数据的容器。

## 1.2 数据的优点

1. 持久化数据到本地
2. 可以实现结构化查询，方便管理
## 1.3 数据的分类
关系型数据库 —— 一系列相互关联的二维表【行列】组成的数据库。
非关系型数据库 ——又称为NoSQL（Not Only SQL )是存储数据时，不依靠固定的表组成的数据库
eg:    键值对模型：以键值对存储数据
   文档模型：以一个个文档来存储数据
   列模型：以列来存储数据，一列为一条数据

## 1.4 数据库系统的组成
数据库、**数据库管理系统（管理数据库的软件）**、数据库应用程序（ui界面）、人员

## 2 数据类型
### 2.1 整数类型
| 数据类型      | 分类 | 范围（有符号）                     | 范围（无符号）                     | 使用场景   |
|-----------|------|----------------------------------|----------------------------------|------------|
| tinyint   | 整数 | (-128, 127)                      | (0, 255)                         | 小整数值   |
| smallint  | 整数 | (-32,768, 32,767)                | (0, 65,535)                       | 大整数值   |
| mediumint | 整数 | (-8,388,608, 8,388,607)          | (0, 16,777,215)                   | 大整数值   |
| **int**   | 整数 | (-2,147,483,648, 2,147,483,647)  | (0, 4,294,967,295)                | 大整数值   |
| bigint    | 整数 | (-9,223,372,036,854,775,808, 9,223,372,036,854,775,807) | (0, 18,446,744,073,709,551,615) | 极大整数值 |


### 2.2 浮点数类型
| 数据类型        | 分类 | 范围（有符号） | 范围（无符号） | 使用场景 |
|-------------|------|---------------|---------------|----------|
| **float**   | | (-3.402 823 466 E+38, -1.175 494 351 E-38), 0, (1.175 494 351 E-38, 3.402 823 466 351 E+38) | 0, (1.175 494 351 E-38, 3.402 823 466 E+38) | 单精度浮点数值 |
| double      | 浮点数 | (-1.797 693 134 862 315 7 E+308, -2.225 073 858 507 201 4 E-308), 0, (2.225 073 858 507 201 4 E-308, 1.797 693 134 862 315 7 E+308) | 0, (2.225 073 858 507 201 4 E-308, 1.797 693 134 862 315 7 E+308) | 双精度浮点数值 |
| **decimal** | | DECIMAL(M,D) 依赖于M和D的值 | 依赖于M和D的值 | 小数值 |

### 2.3 字符串类型
| 数据类型        | 大小 | 使用场景 |
|-------------|------|----------|
| **char**    | 0-255字节 | 定长字符串，适用于长度固定的数据（如身份证号、手机号） |
| **varchar** | 0-65,535字节 | 变长字符串，适用于长度不固定的数据（如姓名、地址） |
| **enum**    | 1或2字节 | 枚举类型，最多65,535个预定义值中选择一个 |
| set         | 最多8字节 | 集合类型，最多64个预定义值中选择多个 |

### 2.4 二进制类型
| 数据类型 | 大小 | 使用场景 |
|---------|------|----------|
| tinyblob | 0-255字节 | 小型二进制数据（如小图标、缩略图） |
| blob | 0-65,535字节 | 中型二进制数据（如图片、音频文件） |
| mediumblob | 0-16,777,215字节 | 大型二进制数据（如高清图片、视频片段） |
| longblob | 0-4,294,967,295字节 | 超大型二进制数据（如大型文件、完整视频） 

### 2.5文本类型
（专门用于存储大量文本内容，支持字符集但不支持默认值）

| 数据类型 | 大小 | 使用场景 |
|---------|------|----------|
| tinytext | 0-255字节 | 短文本内容（如简短备注、标签） |
| text | 0-65,535字节 | 中等长度文本（如文章摘要、产品描述） |
| mediumtext | 0-16,777,215字节 | 长文本内容（如完整文章、详细说明） |
| longtext | 0-4,294,967,295字节 | 超长文本内容（如书籍内容、大型文档） |

### 2.6 日期类型
| 数据类型 | 范围 | 格式 | 使用场景 |
|---------|------|------|----------|
| date | 1000-01-01/9999-12-31 | YYYY-MM-DD | 日期值 |
| time | '-838:59:59'/'838:59:59' | HH:MM:SS | 时间值或持续时间 |
| year | 1901/2155 | YYYY | 年份值 |
| datetime | 1000-01-01 00:00:00/9999-12-31 23:59:59 | YYYY-MM-DD HH:MM:SS | 混合日期和时间值 |
| timestamp | 1970-01-01 00:00:00/2038 | YYYYMMDD HHMMSS | 混合日期和时间值，时间戳 |

# 3 数据库约束
| 序号 | 约束名 | 作用 |
|------|-------|------|
| 1 | primary key（主键） | 物理上存储的顺序 |
| 2 | not null（非空） | 此字段不允许填写空值 |
| 3 | unique（唯一） | 此字段的值不允许重复 |
| 4 | default（默认） | 当不填写此值时会使用默认值，如果填写时以填写为准 |
| 5 | foreign key（外键） | 对关系字段进行约束，当为关关系字段填写值时，会到关联的表中查询此值是否存在，如果存在则填写成功，如果不存在则提示出错误 |
| 6 | auto_increment（自增） | 字段不需要输入数据，自动递增 |

### 数据表范式

第一范式(1NF)：**原子性**
规则：**每个字段都是不可分割的最小单元**

第二范式(2NF)：**完全依赖**
规则：**非主键字段必须完全依赖于整个主键（针对联合主键）**
（例如有两个主键A、B，但C只依赖于B，这就是不行的，需要拆分成两个表，A、B分开）

第三范式(3NF)：**消除传递依赖**
规则：**非主键字段不能依赖于其他非主键字段**
（例如有一个主键A，一个非主键B，若C依赖于B，这也是不行的，需要拆分为两个表）


### 4 数据库操作
（见pycharm的sql）

# 5 小知识点
OVER() 就表示用聚合函数计算,但不进行分组(groupby)的压缩,结果只会加一列数据，表示OVER前面的聚合函数的计算结果

NOW() 表示当前时间

LAST_INSERT_ID()  用于返回最后一次插入操作中自增列的值

SET @last_order_id = LAST_INSERT_ID()  表示将LAST_INSERT_ID()返回的值赋值给@last_order_id

也可以SELECR INTO @xxx [后面接常规操作]   以这样的方式将查询结果临时赋值给临时表@xxx

# 6 事务/索引/视图的关系

| 特性       | 事务       | 索引       | 视图       |
|------------|------------|------------|------------|
| 目的       | 保证数据操作的完整性 | 提高查询性能 | 简化复杂查询 |
| 存储       | 不存储数据 | 存储索引数据结构 | 只存储查询定义 |
| 影响       | 影响数据一致性 | 影响查询/写入性能 | 不影响底层数据生命周期 |
| 生命周期   | 临时性 (commit后结束) | 永久性 | 永久性 |