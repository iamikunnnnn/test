# 1. 索引的基本概念
什么是索引？索引是帮助数据库高效获取数据的数据结构，类似于书籍的目录。
索引的优势：

- 大幅提高查询速度
- 加速连接
- 保证数据唯一性

索引的代价：

- 占用存储空间
- 降低写入速度（增删改时需要维护索引）

# 2 索引速度块的三大原因：
1.**数据量**大幅减少：

- 索引只包含关键字段，比整行数据小得多，同样的磁盘I/O能读取更多索引条目

2.**有序**存储：

- 索引是有序排列的（像字典的字母顺序），可以快速跳过不符合条件的数据

3.高效**算法**：

- 使用B+树等结构，使查询复杂度从O(n)降到O(log n)
- 100万数据只需约20次比较就能找到（因为2^20≈100万）

# 3 常见索引类型
| 索引类型  | 说明           | 适用场景           | 创建代码示例                                                 |
| --------- | -------------- | ------------------ | ------------------------------------------------------------ |
| 普通索引  | 最基本的索引   | 大多数查询字段     | `CREATE INDEX idx_name ON table(column);`                    |
| 唯一索引  | 值必须唯一     | 身份证号、用户名等 | `CREATE UNIQUE INDEX idx_email ON users(email);`             |
| 主键索引  | 特殊的唯一索引 | 表的主键           | `ALTER TABLE users ADD PRIMARY KEY(id);`                     |
| 复合索引  | 多列组合的索引 | 多条件查询         | `CREATE INDEX idx_name_age ON users(name, age);`             |
| 全文索引* | 文本内容搜索   | 文章、描述搜索     | `CREATE FULLTEXT INDEX idx_content ON articles(title, content);` |

# 4 索引的核心思想

拿空间换时间,即空间复杂度会提高但时间复杂度会大幅下降

# 5 索引设计原则

1. 索引选择原则：
   - 在WHERE、JOIN、ORDER BY子句中频繁使用的字段适合建索引
   - 高基数字段(唯一值多的字段)更适合建索引

2. 查看已有索引：
SHOW INDEX FROM users;

3. 索引命名规范：
   - 一般采用idx_字段名或表名_字段名_idx的格式
   - 示例：idx_username或users_username_idx

4. 复合索引顺序：
   - 好的顺序：WHERE a=? AND b=?
   CREATE INDEX idx_a_b ON table(a, b);
   
   - -- 差的顺序：WHERE b=? AND a=?
     CREATE INDEX idx_b_a ON table(b, a);

# 6 索引的使用

(通过EXPLAIN可分析索引是否被使用,也可用于**分析具体需要哪些索引**,具体见视图.sql)

索引在 SQL 中通常是**隐式使用**的，而不是显式指定的。
当你在查询中使用了索引列（例如在 WHERE、GROUP BY、ORDER BY 等子句中）,数据库会自动根据索引优化查询性能，而**不需要在查询语句中显式指定**使用索引。

|语句|是否使用索引|
|-------|--------|
|WHERE cls_id=1    |    使用 idx_cls_age|
|WHERE cls_id=1 AND age=18     |   使用 idx_cls_age|
|WHERE age=18    |    不会使用 idx_cls_age|
|WHERE cls_id=1 AND name='刘德华'  |     使用 idx_cls_age|

# 7 字段名与索引*

字段名和索引是数据库中的两个不同概念，它们有本质区别但又有一定关联。

| 特性 | 字段名(列名) | 索引 |
|------|--------------|------|
| 本质 | 表的列的名称标识符 | 提高查询性能的数据结构 |
| 作用 | 定义表的结构和数据类型 | 加速数据检索 |
| 是否必须 | 是(每个列必须有名称) | 否(可选创建) |
| 存储 | 表结构定义的一部分 | 额外的数据结构 |

1.误解："给字段加了主键就自动是索引"    
事实：主键确实会自动创建索引，但这是主键的特性，不是字段名的特性

2.误解："所有字段都有索引"
事实：只有显式创建或定义了主键/唯一约束的字段才有索引

3.误解："修改字段名会影响索引"
事实：修改字段名通常不会影响已存在的索引，数据库会自动维护这种关联
